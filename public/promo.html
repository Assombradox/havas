<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Havaianas - Censo da Folia 2026</title>
    <link rel="preload" as="image"
        href="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190111/intro-bg_fqupfq.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700;900&family=Nunito:wght@400;700;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f5f5f5;
            -webkit-tap-highlight-color: transparent;
        }

        .font-display {
            font-family: 'Unbounded', sans-serif;
        }

        /* Critical CSS to prevent layout shift before Tailwind loads */
        .hidden {
            display: none !important;
        }

        /* Nike-like Minimalist Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .btn-primary {
            transition: transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1), box-shadow 0.2s ease;
        }

        .btn-primary:active {
            transform: scale(0.96);
        }

        /* Roulette 3D */
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
            transition: transform 4s cubic-bezier(0.25, 1, 0.5, 1);
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.25));
            transform-style: preserve-3d;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.25));
            transform-style: preserve-3d;
        }

        .wheel {
            width: 100%;
            height: 100%;
            position: relative;
            transform: rotate(0deg);
        }

        /* Indicator */
        .indicator {
            z-index: 20;
            filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.3));
        }

        /* Animations */
        @keyframes pulse-logo {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ec4c33;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
            }

            100% {
                transform: translateY(110vh) rotate(720deg);
            }
        }

        /* Truck Animation */
        .truck-drive-in {
            width: 150px;
            animation: driveInFromLeft 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
            opacity: 0;
            transform: translateX(-200%);
        }

        @keyframes driveInFromLeft {
            0% {
                transform: translateX(-200%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="flex flex-col min-h-screen relative overflow-hidden text-gray-900">

    <!-- Background Texture -->
    <div class="fixed inset-0 z-[-1] opacity-50"
        style="background-image: url('data:image/svg+xml,%3Csvg width=\'40\' height=\'40\' viewBox=\'0 0 40 40\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'%239C92AC\' fill-opacity=\'0.05\' fill-rule=\'evenodd\'%3E%3Cpath d=\'M0 40L40 0H20L0 20M40 40V20L20 40\'/%3E%3C/g%3E%3C/svg%3E');">
    </div>

    <!-- Main Content Area -->
    <main
        class="flex-grow flex flex-col items-center justify-center p-4 w-full max-w-md mx-auto relative z-10 h-screen">

        <!-- INTRO MODAL (START) -->
        <div id="intro-view"
            class="glass-panel w-full rounded-[2rem] p-8 shadow-2xl text-center flex flex-col items-center justify-between min-h-[500px] animate-fade-in-up border border-white/50">
            <div class="w-full flex justify-center mb-8">
                <!-- Havaianas Logo Placeholder if Image Fails -->
                <h1 class="text-3xl font-black text-[#ec4c33] tracking-tighter mix-blend-multiply">havaianas</h1>
            </div>

            <div class="flex-grow flex flex-col justify-center items-center gap-6">
                <div
                    class="relative w-48 h-48 rounded-full overflow-hidden border-4 border-white shadow-lg rotate-3 group hover:rotate-6 transition-transform duration-500">
                    <img src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190111/intro-bg_fqupfq.png"
                        alt="Carnaval" width="192" height="192" fetchpriority="high" class="w-full h-full object-cover">
                </div>

                <div class="space-y-2">
                    <h2 class="font-display text-4xl font-black leading-none text-gray-900">CENSO DA<br>FOLIA 2026</h2>
                    <p class="text-gray-500 font-medium text-sm max-w-[200px] mx-auto">Responda 4 perguntas r√°pidas e
                        desbloqueie pr√™mios exclusivos.</p>
                </div>
            </div>

            <button onclick="startQuiz()"
                class="btn-primary w-full bg-gray-900 text-white font-bold py-5 rounded-full text-lg mt-8 flex items-center justify-center gap-2 group">
                COME√áAR AGORA
                <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
            </button>
        </div>

        <!-- QUIZ UI -->
        <div id="quiz-view" class="hidden w-full h-full flex flex-col" style="display: none;">
            <!-- Header Image -->
            <div
                class="relative w-full aspect-[16/10] rounded-[2rem] overflow-hidden shadow-lg mb-6 flex-shrink-0 animate-fade-in-up">
                <img id="quiz-header-img"
                    src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190117/quiz-header-genero_c41hkk.jpg"
                    alt="Quiz Context" width="800" height="500" loading="lazy" decoding="async"
                    class="w-full h-full object-cover transition-transform duration-700 hover:scale-105">
                <div class="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-black/60 to-transparent"></div>
                <div class="absolute bottom-4 left-6 text-white">
                    <p class="text-xs font-bold uppercase tracking-widest opacity-80 mb-1">Pergunta <span
                            id="q-current">1</span>/4</p>
                    <div class="w-12 h-1 bg-white/30 rounded-full overflow-hidden">
                        <div id="progress-bar" class="h-full bg-white transition-all duration-300 w-1/4"></div>
                    </div>
                </div>
            </div>

            <!-- Question & Options -->
            <div class="flex-grow flex flex-col px-2 animate-fade-in-up" style="animation-delay: 0.1s">
                <h2 id="question-text" class="font-display text-2xl font-black text-gray-900 mb-6 leading-tight">
                    Carregando pergunta...</h2>

                <div id="options-list" class="flex flex-col gap-3">
                    <!-- Dynamic Buttons -->
                </div>
            </div>
        </div>

        <!-- LOADING TRANSITION -->
        <div id="transition-overlay"
            class="hidden absolute inset-0 bg-white/90 backdrop-blur-md z-50 flex flex-col items-center justify-center"
            style="display: none;">
            <h1 class="text-4xl font-black text-[#ec4c33] animate-[pulse-logo_1s_infinite]">havaianas</h1>
            <p class="mt-4 text-gray-400 font-bold uppercase tracking-widest text-xs animate-pulse">Processando Vibe...
            </p>
        </div>

        <!-- GAME UI (ROULETTE) -->
        <div id="game-view" class="hidden w-full flex flex-col items-center justify-center animate-fade-in-up"
            style="display: none;">
            <div class="text-center mb-8">
                <h2 class="font-display text-3xl font-black text-gray-900">Obrigador por participar da pesquisa!</h2>
                <p class="text-gray-500 text-sm mt-1">Gire para descobrir seu benef√≠cio</p>
            </div>

            <div class="relative mb-10">
                <!-- Indicator Arrow (Image) -->
                <div class="absolute -top-6 left-1/2 -translate-x-1/2 z-20 w-[60px]">
                    <img src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190112/pino-visual_yd66gg.png"
                        alt="Indicator" width="60" height="80" loading="lazy" decoding="async"
                        class="w-full drop-shadow-md">
                </div>

                <div class="wheel-container" id="wheel-rotation">
                    <div class="wheel flex items-center justify-center">
                        <img src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190118/roleta-visual_o72blo.png"
                            alt="Roleta" width="300" height="300" loading="lazy" decoding="async"
                            class="w-full h-full object-contain">
                    </div>
                </div>
            </div>

            <button id="spin-btn" onclick="spinWheel()"
                class="btn-primary bg-[#ec4c33] text-white font-black py-4 px-12 rounded-full text-xl shadow-lg shadow-orange-200 w-full max-w-xs">
                GIRAR ROLETA
            </button>
            <p class="mt-4 text-xs font-bold text-gray-400 uppercase tracking-widest">Tentativas: <span
                    id="spins-count">3</span></p>
        </div>

    </main>

    <!-- FINAL WINNER MODAL -->
    <div id="winner-modal"
        class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none"
        style="display: none;">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-500" onclick="noClose()">
        </div>

        <div class="bg-white w-full sm:max-w-md p-0 sm:rounded-[2.5rem] rounded-t-[2.5rem] shadow-2xl relative overflow-hidden pointer-events-auto transform translate-y-full transition-transform duration-500"
            id="winner-card">
            <!-- Confetti Canvas Area -->
            <div id="confetti-area" class="absolute inset-0 pointer-events-none z-0"></div>

            <div class="relative z-10">
                <!-- Premium Image Top -->
                <div class="w-full h-64 bg-gray-100 relative">
                    <img src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190112/premio-final_w3zimz.jpg"
                        alt="Pr√™mio Final" width="450" height="256" loading="lazy" decoding="async"
                        class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-6">
                        <div class="text-white">
                            <p class="font-bold text-sm uppercase tracking-wider opacity-90">Pr√™mio M√°ximo Desbloqueado
                            </p>
                            <h2 class="font-display text-4xl font-black">60% OFF +</h2>
                            <h2 class="font-display text-4xl font-black">Frete Gr√°tis</h2>
                        </div>
                    </div>
                </div>

                <div class="p-8 bg-white">
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                                <i class="fa-solid fa-check text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-900">Cupom Aplicado</h3>
                                <p class="text-sm text-gray-500">Toda a loja com 60% OFF</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                                <i class="fa-solid fa-truck text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-900">Frete Gr√°tis</h3>
                                <p class="text-sm text-gray-500">Para todo Brasil</p>
                            </div>
                        </div>
                    </div>

                    <button onclick="goToStore()"
                        class="btn-primary w-full bg-black text-white font-black py-4 rounded-xl text-lg flex justify-center items-center gap-2 shadow-xl">
                        RESGATAR AGORA
                        <i class="fa-solid fa-bag-shopping"></i>
                    </button>
                    <p class="text-center mt-3 text-xs text-gray-400 font-medium">Oferta expira em <span
                            id="offer-countdown" class="font-bold text-[#ec4c33]">59:00</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- TRY AGAIN MODAL -->
    <div id="try-again-modal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in-up"
        style="display: none;">
        <div class="bg-white rounded-3xl p-8 max-w-xs text-center shadow-2xl mx-4 relative">
            <div class="mb-4 text-4xl">üòÖ</div>
            <h3 id="try-again-title" class="font-display text-2xl font-black text-gray-900 mb-2">Quase l√°!</h3>
            <p id="try-again-desc" class="text-gray-500 text-sm mb-6">A sorte est√° girando. Voc√™ tem mais uma chance de
                ganhar!</p>
            <button onclick="closeTryAgainModal()"
                class="btn-primary w-full bg-gray-900 text-white font-bold py-3 rounded-full">
                GIRAR NOVAMENTE
            </button>
        </div>
    </div>

    <!-- FREE SHIPPING MODAL (NEW) -->
    <div id="free-shipping-modal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in-up"
        style="display: none;">
        <div class="bg-white rounded-3xl p-8 max-w-xs text-center shadow-2xl mx-4 relative overflow-hidden">
            <div class="w-full flex justify-center mb-6">
                <img src="https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190111/caminhao-frete_e0arqq.png"
                    alt="Caminh√£o Frete" width="150" height="100" loading="lazy" decoding="async"
                    class="truck-drive-in">
            </div>
            <h3 class="font-display text-2xl font-black text-gray-900 mb-2 leading-none">A√ä√ä!<br>FRETE GR√ÅTIS! üööüí®</h3>
            <p class="text-gray-500 text-sm mb-6">J√° √© seu! Mas calma que tem coisa MELHOR te esperando no √∫ltimo giro.
            </p>
            <button onclick="closeFreeShippingModal()"
                class="btn-primary w-full bg-[#00a7bb] text-white font-bold py-4 rounded-full shadow-lg shadow-cyan-200">
                GIRAR A √öLTIMA VEZ!
            </button>
        </div>
    </div>

    <!-- SCRIPT LOGIC -->
    <script>
        // --- DATA & STATE ---
        let currentQIndex = 0;
        let userData = {
            gender: 'neutral', // Default
            location: '',
            vibe: '',
            style: ''
        };

        const questions = [
            {
                id: 'gender',
                text: "Primeiro, conta pra gente: qual cole√ß√£o faz mais seu estilo?",
                options: [
                    { label: "Linha Masculina", icon: "üë®", val: "masculino" },
                    { label: "Linha Feminina", icon: "üë©", val: "feminino" },
                    { label: "Sem G√™nero / Unissex", icon: "üåà", val: "neutral" }
                ]
            },
            {
                id: 'location',
                text: "Onde voc√™ pretende passar a maior parte da folia?",
                options: [
                    { label: "Bloco de Rua", icon: "ü•Å", val: "rua" },
                    { label: "P√© na Areia", icon: "üèñÔ∏è", val: "praia" },
                    { label: "Churrasco em Casa", icon: "üè†", val: "casa" }
                ]
            },
            {
                id: 'vibe',
                text: "Qual vai ser a intensidade do rol√™?",
                options: [
                    { label: "Inimigo do Fim", icon: "‚ö°", val: "festa" },
                    { label: "Socialzinha", icon: "üçª", val: "social" },
                    { label: "Modo Descanso", icon: "üí§", val: "relax" }
                ]
            },
            {
                id: 'style',
                text: "E pra fechar: o que n√£o pode faltar no look?",
                options: [
                    { label: "Muito Brilho", icon: "‚ú®", val: "glitter" },
                    { label: "Fantasia Completa", icon: "üé≠", val: "fantasia" },
                    { label: "Conforto Total", icon: "‚òÅÔ∏è", val: "conforto" }
                ]
            }
        ];

        // --- NAVIGATION FUNCTIONS ---

        function startQuiz() {
            document.getElementById('intro-view').classList.add('hidden');
            const quizView = document.getElementById('quiz-view');
            quizView.style.display = ''; // Clear inline style
            quizView.classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQIndex];

            // Header Image Logic
            const headerImg = document.getElementById('quiz-header-img');
            if (headerImg) {
                if (currentQIndex === 0) {
                    headerImg.src = "https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190117/quiz-header-genero_c41hkk.jpg";
                } else {
                    headerImg.src = "https://res.cloudinary.com/ddcjebuni/image/upload/f_auto,q_auto/v1770190112/quiz-header-atmosfera_m8qbes.jpg";
                }
            }

            // Update Text
            document.getElementById('question-text').innerText = q.text;
            document.getElementById('q-current').innerText = currentQIndex + 1;

            // Update Progress
            const pct = ((currentQIndex + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${pct}%`;

            // Render Options
            const container = document.getElementById('options-list');
            container.innerHTML = '';

            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 rounded-xl border-2 border-transparent bg-white shadow-sm hover:border-gray-900 transition-all duration-200 flex items-center gap-4 group animate-fade-in-up`;
                btn.style.animationDelay = `${idx * 0.1}s`;

                btn.innerHTML = `
                    <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-xl group-hover:bg-gray-900 group-hover:text-white transition-colors">
                        ${opt.icon}
                    </div>
                    <span class="font-bold text-gray-700 group-hover:text-gray-900 text-lg">${opt.label}</span>
                `;

                btn.onclick = () => handleAnswer(q.id, opt.val);
                container.appendChild(btn);
            });
        }

        function handleAnswer(key, value) {
            userData[key] = value;

            // Show Transition logic if needed, or simple direct next
            if (currentQIndex < questions.length - 1) {
                currentQIndex++;
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            // Show overlay transition
            const overlay = document.getElementById('transition-overlay');
            const quizView = document.getElementById('quiz-view');

            localStorage.setItem('carnival_data', JSON.stringify(userData));

            quizView.classList.add('opacity-0', 'transition-opacity', 'duration-500');

            setTimeout(() => {
                quizView.classList.add('hidden');
                overlay.style.display = ''; // Clear inline
                overlay.classList.remove('hidden');

                // Simulate processing
                setTimeout(() => {
                    overlay.classList.add('hidden');
                    const gameView = document.getElementById('game-view');
                    gameView.style.display = ''; // Clear inline
                    gameView.classList.remove('hidden');
                }, 2000);
            }, 500);
        }

        // --- GAME LOGIC ---
        let spins = 3;
        let currentRotation = 0;

        function spinWheel() {
            if (spins <= 0) return;

            spins--;
            document.getElementById('spins-count').innerText = spins;

            const btn = document.getElementById('spin-btn');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            // --- SCRIPTED JOURNEY & MATH (UPDATED) ---
            // Indices (0-5 clockwise from top): 
            // 0: Frete(Red), 1: Try(Turq), 2: Win(Yell), 3: Gift, 4: Almost(Green), 5: Try(Purp)

            let targetIndex = 0;
            let resultType = ''; // 'loss', 'free_shipping', 'win'

            if (spins === 2) {
                // Spin 1 -> Target Index 5 (Try Again - Purple)
                targetIndex = 5;
                resultType = 'loss';
            } else if (spins === 1) {
                // Spin 2 -> Target Index 0 (Free Shipping - Red)
                targetIndex = 0;
                resultType = 'free_shipping';
            } else {
                // Spin 3 -> Target Index 2 (Win - Yellow)
                targetIndex = 2;
                resultType = 'win';
            }

            // Math-Based Rotation Formula (UPDATED PRECISE)
            // Target Rotation = (5 * 360) + (360 - (targetIndex * 60));
            // This ensures we always spin 5 times and land exactly on the index

            const spinsCount = 5 * 360;
            const angleToTarget = 360 - (targetIndex * 60);
            const finalRot = currentRotation + spinsCount + (angleToTarget - (currentRotation % 360));

            // Apply
            const wheelEl = document.getElementById('wheel-rotation');
            wheelEl.style.transform = `rotate(${finalRot}deg)`;
            currentRotation = finalRot;

            setTimeout(() => {
                handleSpinResult(resultType);
            }, 4100);
        }

        function handleSpinResult(resultType) {
            if (resultType === 'loss') {
                // Show Try Again Modal (Spin 1)
                const modal = document.getElementById('try-again-modal');
                const title = document.getElementById('try-again-title');
                const desc = document.getElementById('try-again-desc');

                title.innerText = "Quase! üòÖ";
                desc.innerText = "Tente de novo.";

                modal.style.display = ''; // Clear inline
                modal.classList.remove('hidden');

            } else if (resultType === 'free_shipping') {
                // Show Free Shipping Modal (Spin 2)
                const modal = document.getElementById('free-shipping-modal');
                modal.style.display = ''; // Clear inline
                modal.classList.remove('hidden');

            } else {
                // WINNER (Spin 3)
                showWinnerModal();
            }
        }

        function closeFreeShippingModal() {
            const modal = document.getElementById('free-shipping-modal');
            modal.classList.add('hidden');
            reEnableSpin();
        }

        function closeTryAgainModal() {
            const modal = document.getElementById('try-again-modal');
            modal.classList.add('hidden');
            reEnableSpin();
        }

        function reEnableSpin() {
            const btn = document.getElementById('spin-btn');
            btn.disabled = false;
            btn.classList.remove('opacity-50', 'cursor-not-allowed');
            // Keep it static per instruction (no pulse)
        }

        function showWinnerModal() {
            const modal = document.getElementById('winner-modal');
            const card = document.getElementById('winner-card');

            modal.style.display = ''; // Clear inline
            modal.classList.remove('hidden');
            // Trigger Animation
            setTimeout(() => {
                card.classList.remove('translate-y-full');
            }, 100);

            // Confetti
            createConfetti();

            // Start Countdown
            startOfferCountdown();
        }

        function createConfetti() {
            // Simple DOM confetti
            const colors = ['#ec4c33', '#4ade80', '#00a7bb', '#fcd34d'];
            const container = document.getElementById('confetti-area');

            for (let i = 0; i < 50; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + '%';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(conf);
            }
        }

        function goToStore() {
            // 1. Capture current params (e.g. ?utm_source=FB)
            const currentParams = new URLSearchParams(window.location.search);

            // 2. Add/Overwrite specific campaign params
            currentParams.set('coupon', 'DESCONTO60');
            currentParams.set('gender', userData.gender);

            // 3. Set Defaults ONLY if missing (Preserve FB/Google attribution)
            if (!currentParams.has('utm_source')) currentParams.set('utm_source', 'quiz_carnaval');
            if (!currentParams.has('utm_medium')) currentParams.set('utm_medium', 'promo_page');
            if (!currentParams.has('utm_campaign')) currentParams.set('utm_campaign', 'summer_2026');

            // 4. Redirect
            const baseUrl = window.location.origin;
            window.location.href = baseUrl + "/?" + currentParams.toString();
        }

        function startOfferCountdown() {
            let duration = 59 * 60; // 59 minutes
            const display = document.getElementById('offer-countdown');

            if (!display) return;

            // Avoid multiple intervals if clicked multiple times (though modal blocks it)
            if (window.offerInterval) clearInterval(window.offerInterval);

            window.offerInterval = setInterval(() => {
                let minutes = parseInt(duration / 60, 10);
                let seconds = parseInt(duration % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;

                if (--duration < 0) {
                    clearInterval(window.offerInterval);
                    display.textContent = "00:00";
                }
            }, 1000);
        }

    </script>
</body>

</html>